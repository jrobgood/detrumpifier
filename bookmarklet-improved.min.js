!function(){let e,t=!1;const o={"news.google.com":{name:"Google News",selectors:{articles:["article","article[jscontroller]","c-wiz article",'[role="article"]',"main article"],titles:["h3","h4","h2",'[role="heading"]','a[href*="/read/"] h3','a[href*="/articles/"] h3']}},"cnn.com":{name:"CNN",selectors:{articles:[".card","article.card",".cd__wrapper",".cn__column .cd__content",'div[data-component-name="card"]'],titles:[".card__headline-text",".cd__headline-text","h3.cd__headline",".card__content h3"]}},"bbc.com":{name:"BBC News",selectors:{articles:[".gs-c-promo",".media",".media__content","article",'[data-testid="promo"]'],titles:[".gs-c-promo-heading__title",".media__title a",".media__link","h3.gs-c-promo-heading__title"]}},"reuters.com":{name:"Reuters",selectors:{articles:["article",'[data-testid="article-card"]',".story-card",".article-wrap"],titles:['[data-testid="Heading"]',".story-card__headline","h3 a","h2 a"]}},"nytimes.com":{name:"The New York Times",selectors:{articles:["article",'[data-testid="block"] li','section li[class*="css-"]','div[class*="story-wrapper"]',".css-1l4spti","h3:not(:empty)",'a[href*="/audio/"]','a[href*="/podcasts/"]'],titles:["h3","h2",".indicate-hover",'[data-testid="headline"]','h3[class*="indicate-hover"]','p[class*="indicate-hover"]',"a h3"]}}};function i(e){if(!e)return"";const t=document.createTreeWalker(e,NodeFilter.SHOW_TEXT,null,!1),o=[];let i;for(;i=t.nextNode();){const e=i.textContent.trim();e&&o.push(e)}return o.join(" ")}function r(e){return[/\bdonald\s+trump\b/i,/\btrump\b/i,/\bpresident\s+trump\b/i,/\bformer\s+president\s+trump\b/i,/\bex-president\s+trump\b/i,/\btrump's\b/i,/\btrump['']s\b/i].some(t=>t.test(e))}function n(){const e=function(){const e=window.location.hostname.replace("www.","");return o[e]}();if(!e)return void console.log("Detrumpifier: Site not supported");const n=function(e){if(!e||!e.selectors)return[];const t=e.selectors.articles;let o=[];for(const e of t){const t=document.querySelectorAll(e);o.push(...t)}return[...new Set(o)]}(e);let s=0;n.forEach(t=>{if("none"===t.style.display||t.hasAttribute("data-detrumpified"))return;const o=function(e,t){if(!t||!t.selectors)return"";const o=t.selectors.titles;for(const t of o){const o=e.querySelector(t);if(o){const e=i(o);if(e)return e}}const r=e.querySelectorAll("h1, h2, h3, h4");for(const e of r){const t=i(e);if(t.length>10)return t}return""}(t,e),n=i(t);(r(o)||r(n))&&(t.style.display="none",t.setAttribute("data-detrumpified","true"),s++)}),s>0&&!t&&function(e,o){let i=document.getElementById("detrumpifier-snipe");if(i)return void(i.querySelector("span").textContent=`100% Trump-free on ${o} (${e} filtered)`);i=document.createElement("div"),i.id="detrumpifier-snipe",i.style.cssText="position:fixed;top:20px;right:20px;background:#0b57d0;color:white;padding:12px 20px;border-radius:8px;font-family:Arial,sans-serif;font-size:14px;font-weight:500;box-shadow:0 2px 8px rgba(0,0,0,0.2);z-index:9999;opacity:0;transition:opacity 0.3s;";const r=document.createElement("span");r.style.marginRight="25px",r.textContent=`100% Trump-free on ${o} (${e} filtered)`;const n=document.createElement("button");n.style.cssText="position:absolute;top:50%;right:8px;transform:translateY(-50%);background:none;border:none;color:white;cursor:pointer;font-size:16px;line-height:1;padding:4px;margin:-4px;opacity:0.8;transition:opacity 0.2s;",n.innerHTML="&times;",n.setAttribute("aria-label","Dismiss"),n.onmouseover=function(){this.style.opacity="1"},n.onmouseout=function(){this.style.opacity="0.8"},n.onclick=function(){t=!0,i.style.opacity="0",setTimeout(()=>i.remove(),300)},i.appendChild(r),i.appendChild(n),document.body.appendChild(i),setTimeout(()=>{i.style.opacity="1"},10)}(s,e.name),console.log(`Detrumpifier: Filtered ${s} articles on ${e.name}`)}n();new MutationObserver(()=>{clearTimeout(e),e=setTimeout(n,1e3)}).observe(document.body,{childList:!0,subtree:!0}),console.log("Detrumpifier bookmarklet v3 loaded - multi-site support")}();